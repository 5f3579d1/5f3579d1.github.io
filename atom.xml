<?xml version="1.0" encoding="utf-8"?>
<feed xmlns="http://www.w3.org/2005/Atom">
  <title><![CDATA[Hexo]]></title>
  
  <link href="/atom.xml" rel="self"/>
  <link href="http://zhangke.pub/"/>
  <updated>2016-03-13T12:31:34.000Z</updated>
  <id>http://zhangke.pub/</id>
  
  <author>
    <name><![CDATA[k]]></name>
    
  </author>
  
  <generator uri="http://hexo.io/">Hexo</generator>
  
  <entry>
    <title><![CDATA[casperjs-phantomjs]]></title>
    <link href="http://zhangke.pub/2016/03/13/casperjs-phantomjs/"/>
    <id>http://zhangke.pub/2016/03/13/casperjs-phantomjs/</id>
    <published>2016-03-13T12:09:58.000Z</published>
    <updated>2016-03-13T12:31:34.000Z</updated>
    <content type="html"><![CDATA[<p>今天用 <a href="http://phantomjs.org" target="_blank" rel="external">phantomjs</a> 做点东西，测试都通过了。因为要和同事基于 casperjs 写的业务流程组合起来。<br>一直听说 <a href="http://casperjs.org" target="_blank" rel="external">casperjs</a> 是基于 phantomjs (和 SlimerJS) 的封装。想想组合起来应该没什么问题。<br>试过</p>
<ol>
<li>直接修改成 casperjs 的方法。</li>
<li>casperjs 调用外部 js。</li>
<li>直接将 phantomjs 的代码嵌套进去。</li>
</ol>
<p>问题都没有解决，总是和单独用 phantomjs 写的效果不一样。<br>最后 <a href="http://docs.casperjs.org/en/latest/faq.html#how-do-i-use-phantomjs-page-module-api-in-casperjs" target="_blank" rel="external">FQA</a> 找到这句话</p>
<blockquote>
<p>After casperjs.start(), you have phantomjs page module available in casper.page</p>
</blockquote>
<p>也就是说 casper.page 就是 phantomjs 中的 page 对象。可以直接稍微修改下 phantomjs 的代码，嵌套进 casperjs。<br>理论上应该就没问题，但还是不对。WTF。</p>
<p>从头来过。直接在terminal敲了下 casperjs。有句 <strong>using phantomjs version</strong> 版本不对。<br>剩下就是替换，或者指明使用的 phantomjs 版本了。<br>我直接删了 casperjs 目录下的 phantomjs，然后做个软链接。</p>
]]></content>
    <summary type="html">
    <![CDATA[<p>今天用 <a href="http://phantomjs.org" target="_blank" rel="external">phantomjs</a> 做点东西，测试都通过了。因为要和同事基于 casperjs 写的业务流程组合起来。<br>一直听说 <a href]]>
    </summary>
    
      <category term="casperjs phantomjs" scheme="http://zhangke.pub/tags/casperjs-phantomjs/"/>
    
  </entry>
  
  <entry>
    <title><![CDATA[my key]]></title>
    <link href="http://zhangke.pub/2016/01/28/my-key/"/>
    <id>http://zhangke.pub/2016/01/28/my-key/</id>
    <published>2016-01-28T06:16:11.000Z</published>
    <updated>2016-01-28T06:17:51.000Z</updated>
    <content type="html"><![CDATA[<p>—–BEGIN PGP PUBLIC KEY BLOCK—–<br>Version: GnuPG v2</p>
<p>mQENBFam5eoBCACuc2dzD1v4vBfNPyO2oB0bhl1qyOiOudazcCHHKmdXxsoLvKnL<br>8qXm2C7LN4FuNANaybFqDBStOwEgE2iPgfuHiIuKxk3BebGTmfQmLCis4hbXXJer<br>U2X2e1Fj3EPTaS9BoWuuJMmDYYFscHqREjLrNc4qEEc5hCeOZ5pNu3eVN5Xe9nif<br>7mSft1HVvQ7/vIa5VetxDRt733W2S14F9VlwgOrZ8A/lRLks0k31k4YxQFQzSoOj<br>LoZhp7MiwfN3nZojDjBK9TJt5JtETQMWptwcp39HVbg6kIZ1OvK/bqdM0cy3Mys8<br>tMrUl7aevlpHr6dhWNZrRBz6k5dhhgGYqe9vABEBAAG0HktlIENoZXVuZyA8NWYz<br>NTc5ZDFAZ21haWwuY29tPokBPQQTAQIAKAUCVqbl6gIbAwUJAeEzgAYLCQgHAwIG<br>FQgCCQoLBBYCAwECHgECF4AACgkQtT4unSv1GdEEggf4xW6q8QIWE9o6bsNIxfG8<br>W4kFmknVpuq/6oVR+7lQNxY9shE4tFFzmR9tGZBB0PscDD3ydAQeKjcwXRAKehva<br>39SiVl8cTnoSH/h9Pg+/8jHt3f0WSCB2GT1d+bAv0FmBQoM6QEsKpZ/fxT1zXFG8<br>NWYdXmkQ7LxrOKvoX987wKxekLe57tlb50oDnWVg4eRcN7CZ23rj/y8wL6yx2If/<br>5AebYWdKEP+tQWVmniLh+HaZSrYG/Txen7BBZQrDnBQwGmoWMXm0Ws/gaGEJDLOp<br>3e8h275ojQJbzThbndYvl+yUGG0vfMG8cA0K/FKZS2nKDzL9nHnhSVXrqTSRx/P2<br>uQENBFam5eoBCAD8wJdL24H3oh8YJMKnvrUC3SaDuK37I9dZJCoVWw1l19s7evBM<br>uvc6jGlN01XdEdglNUmJTN3SuvTGbKN/8DZKl9Of+U2B1UqUpeeSlEG77NpdoGD9<br>VnhRVusIFSGD88fmgtpuulILnzm4N/hpOm8wUY553SASHmRe6i6Tur8qwLgCUyW3<br>UOgxXHVwQ/GWfzJd05SJhN7wgTCu7BPy7jJMOlII+TYErQNhPNU48yUWM41302z5<br>3OAC91of6B8hyasLW4/e0uDhyta4JjxBlwVJsiECwoNi9JxKDJZ64q2oeeroL/OL<br>M/RJYCdt0VbX2zVIvb3Ogijhx52OJlBN8sdxABEBAAGJASUEGAECAA8FAlam5eoC<br>GwwFCQHhM4AACgkQtT4unSv1GdHRFgf/UMHDor7fwL2kujolA1ED+MZrfdizpHbk<br>+2XOnETKO5i6FNCM/PqvRedmTtOc03DCLrYKqwGt8wMbbhco60SroFbVrlLfAMOG<br>ZTXPBMASWLHhouPs/Wl5UpmbbrtNUlbhmePPyfeIye1CYxNKy6Ar4F/kjFdHGzu3<br>+ah0BX0d1i7YrMcTvrutfpHrU/ZSXcHMGw4DcKztHFeItVudzkIoqVBYGlMFMiSp<br>lQYQL6SDEnIWk/ClX1lJ8XoJlBhQzqOkDgnC/TQ2iRgEIpdaKq8OjJ7+m6N2pMJQ<br>b+5Gs7jH3moZBBqOTimKaZkKeZnLeXNSevlg3/rfjE5Wa/5URZyWOw==<br>=80VB<br>—–END PGP PUBLIC KEY BLOCK—–</p>
]]></content>
    <summary type="html">
    <![CDATA[<p>—–BEGIN PGP PUBLIC KEY BLOCK—–<br>Version: GnuPG v2</p>
<p>mQENBFam5eoBCACuc2dzD1v4vBfNPyO2oB0bhl1qyOiOudazcCHHKmdXxsoLvKnL<br>8qXm2C7LN4]]>
    </summary>
    
  </entry>
  
  <entry>
    <title><![CDATA[197. Rising Temperature]]></title>
    <link href="http://zhangke.pub/2016/01/09/197-Rising-Temperature/"/>
    <id>http://zhangke.pub/2016/01/09/197-Rising-Temperature/</id>
    <published>2016-01-09T02:44:55.000Z</published>
    <updated>2016-01-09T02:53:00.000Z</updated>
    <content type="html"><![CDATA[<p><a href="https://leetcode.com/problems/rising-temperature/" target="_blank" rel="external">Question</a></p>
<h2 id="Initalization"><a href="#Initalization" class="headerlink" title="Initalization"></a>Initalization</h2><figure class="highlight"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">drop table Weather if exists Weather;&#10;&#10;create table Weather (&#10;&#9;`Id` int (1) primary key auto_increment,&#10;&#9;`Date` date,&#10;&#9;`Temperature` int(3)&#10;);&#10;&#10;insert into Weather (`Date`, Temperature) values&#10;  (&#39;2015-01-01&#39;, 10),&#10;  (&#39;2015-01-02&#39;, 25),&#10;  (&#39;2015-01-03&#39;, 20),&#10;  (&#39;2015-01-04&#39;, 30);</span><br></pre></td></tr></table></figure>
<h2 id="Solution"><a href="#Solution" class="headerlink" title="Solution"></a>Solution</h2><figure class="highlight"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"># Write your MySQL query statement below&#10;select today.Id&#10;from Weather yesterday join Weather today on DATE_ADD(yesterday.Date, INTERVAL 1 DAY) = today.Date&#10;where yesterday.Temperature &#60; today.Temperature;</span><br></pre></td></tr></table></figure>
]]></content>
    <summary type="html">
    <![CDATA[<p><a href="https://leetcode.com/problems/rising-temperature/" target="_blank" rel="external">Question</a></p>
<h2 id="Initalization"><a hre]]>
    </summary>
    
      <category term="leetcode database" scheme="http://zhangke.pub/tags/leetcode-database/"/>
    
  </entry>
  
  <entry>
    <title><![CDATA[262.trips and users]]></title>
    <link href="http://zhangke.pub/2016/01/09/262-trips-and-users/"/>
    <id>http://zhangke.pub/2016/01/09/262-trips-and-users/</id>
    <published>2016-01-08T17:13:16.000Z</published>
    <updated>2016-01-09T02:51:22.000Z</updated>
    <content type="html"><![CDATA[<p><a href="https://leetcode.com/problems/trips-and-users" target="_blank" rel="external">Question</a></p>
<h2 id="Initialization"><a href="#Initialization" class="headerlink" title="Initialization"></a>Initialization</h2><figure class="highlight"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">DROP TABLE IF EXISTS `Trips`;&#10;&#10;CREATE TABLE `Trips` (&#10;  `Id` int(3) NOT NULL AUTO_INCREMENT,&#10;  `Client_Id` int(3) DEFAULT NULL,&#10;  `Driver_Id` int(3) DEFAULT NULL,&#10;  `City_Id` int(3) DEFAULT NULL,&#10;  `Status` varchar(32) DEFAULT NULL,&#10;  `Request_at` date DEFAULT NULL,&#10;  PRIMARY KEY (`Id`)&#10;) ENGINE=InnoDB DEFAULT CHARSET=latin1;&#10;&#10;INSERT INTO `Trips` (`Id`, `Client_Id`, `Driver_Id`, `City_Id`, `Status`, `Request_at`)&#10;VALUES&#10;&#9;(1,1,11,1,&#39;completed&#39;,&#39;2013-10-01&#39;),&#10;&#9;(2,2,12,6,&#39;cancelled_by_driver&#39;,&#39;2013-10-01&#39;),&#10;&#9;(3,3,13,6,&#39;completed&#39;,&#39;2013-10-01&#39;),&#10;&#9;(4,4,10,1,&#39;cancelled_by_client&#39;,&#39;2013-10-01&#39;),&#10;&#9;(5,1,11,6,&#39;completed&#39;,&#39;2013-10-02&#39;),&#10;&#9;(6,2,12,6,&#39;completed&#39;,&#39;2013-10-02&#39;),&#10;&#9;(7,3,12,12,&#39;completed&#39;,&#39;2013-10-02&#39;),&#10;&#9;(8,2,10,12,&#39;completed&#39;,&#39;2013-10-03&#39;),&#10;&#9;(9,3,10,12,&#39;completed&#39;,&#39;2013-10-03&#39;),&#10;&#9;(10,4,13,12,&#39;cancelled_by_driver&#39;,&#39;2013-10-03&#39;);&#10;&#10;DROP TABLE IF EXISTS `Users`;&#10;&#10;CREATE TABLE `Users` (&#10;  `Users_Id` int(3) NOT NULL AUTO_INCREMENT,&#10;  `Banned` varchar(32) DEFAULT NULL,&#10;  `Role` varchar(32) DEFAULT NULL,&#10;  PRIMARY KEY (`Users_Id`)&#10;) ENGINE=InnoDB DEFAULT CHARSET=latin1;&#10;&#10;LOCK TABLES `users` WRITE;&#10;&#10;INSERT INTO `Users` (`Users_Id`, `Banned`, `Role`)&#10;VALUES&#10;&#9;(1,&#39;NO&#39;,&#39;client&#39;),&#10;&#9;(2,&#39;YES&#39;,&#39;client&#39;),&#10;&#9;(3,&#39;NO&#39;,&#39;client&#39;),&#10;&#9;(4,&#39;NO&#39;,&#39;client&#39;),&#10;&#9;(10,&#39;NO&#39;,&#39;driver&#39;),&#10;&#9;(11,&#39;NO&#39;,&#39;driver&#39;),&#10;&#9;(12,&#39;NO&#39;,&#39;driver&#39;),&#10;&#9;(13,&#39;NO&#39;,&#39;driver&#39;);</span><br></pre></td></tr></table></figure>
<h2 id="Solution"><a href="#Solution" class="headerlink" title="Solution"></a>Solution</h2><figure class="highlight"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">&#10;# Write your MySQL query statement below&#10;select total.day as &#39;Day&#39;, ROUND(IFNULL(cancelled.count,0)/total.count, 2) &#39;Cancellation Rate&#39;&#10;from&#10;&#10;(&#10;select t.Request_at as day , count(*) as count&#10;from Trips t join Users c on t.Client_Id = c.Users_Id join Users d on t.Driver_Id = d.Users_Id&#10;where c.Banned = &#39;No&#39; and d.Banned = &#39;No&#39; and t.status != &#39;completed&#39; and t.Request_at between &#39;2013-10-01&#39; and &#39;2013-10-03&#39;&#10;group by t.Request_at&#10;) cancelled&#10;&#10;right join&#10;&#10;(&#10;select t.Request_at as day, count(*) as count&#10; from Trips t join Users c on t.Client_Id = c.Users_Id join Users d on t.Driver_Id = d.Users_Id&#10; where  c.Banned = &#39;No&#39; and d.Banned = &#39;No&#39; and t.Request_at between &#39;2013-10-01&#39; and &#39;2013-10-03&#39;&#10; group by t.Request_at&#10;) total&#10;&#10;on cancelled.day = total.day&#10;&#10;group by total.day;</span><br></pre></td></tr></table></figure>
]]></content>
    <summary type="html">
    <![CDATA[<p><a href="https://leetcode.com/problems/trips-and-users" target="_blank" rel="external">Question</a></p>
<h2 id="Initialization"><a href="]]>
    </summary>
    
      <category term="leetcode database" scheme="http://zhangke.pub/tags/leetcode-database/"/>
    
  </entry>
  
  <entry>
    <title><![CDATA[nginx cache]]></title>
    <link href="http://zhangke.pub/2015/12/23/nginx-cache/"/>
    <id>http://zhangke.pub/2015/12/23/nginx-cache/</id>
    <published>2015-12-23T15:02:15.000Z</published>
    <updated>2015-12-23T16:17:31.000Z</updated>
    <content type="html"><![CDATA[<p>刚开始做网站的时候总想禁用缓存，每次系统更新，用户那边总是会有延迟，老让用户重启微信或者强刷浏览器体验太差了，后来用上了 gulp，缓存这个问题算是解决了。<br>我们网站以图片展示为主，页面显示效果不好，图片乱序加载，耗时长。先是引入了懒加载，能尽可能将当前的图片显示出来，但是图片加载时间还是没减少。该怎样减少加载时间？CDN，或者直接加带宽，这都不被成本给限制了。那这个图片是不是该缓存下来，至少第二次访问能体验能好很多，这个图片本来就是用户上传的，固定的，每个链接就唯一的图，它是不会变的，本来就该本缓存起来。<br>于是看人家是怎么实现的，都是用 http header 如 Last-Modified, ETag 控制的 </p>
<p>location ~ .* {<br>    if ($request_uri ~ ^/imgres) {<br>        expires max;<br>    }<br>    proxy_pass <a href="http://wetime" target="_blank" rel="external">http://wetime</a>;<br>    proxy_set_header X-Real-IP $remote_addr;<br>}</p>
]]></content>
    <summary type="html">
    <![CDATA[<p>刚开始做网站的时候总想禁用缓存，每次系统更新，用户那边总是会有延迟，老让用户重启微信或者强刷浏览器体验太差了，后来用上了 gulp，缓存这个问题算是解决了。<br>我们网站以图片展示为主，页面显示效果不好，图片乱序加载，耗时长。先是引入了懒加载，能尽可能将当前的图片显示出来]]>
    </summary>
    
      <category term="nginx cache" scheme="http://zhangke.pub/tags/nginx-cache/"/>
    
  </entry>
  
  <entry>
    <title><![CDATA[yum install iftop ]]></title>
    <link href="http://zhangke.pub/2015/12/23/yum-install-iftop/"/>
    <id>http://zhangke.pub/2015/12/23/yum-install-iftop/</id>
    <published>2015-12-22T17:30:01.000Z</published>
    <updated>2015-12-22T17:48:02.000Z</updated>
    <content type="html"><![CDATA[<p>最近搞了个萌宝投票活动，网站流量较大，也不知道该加多少带宽。<br>提了个工单，说是看<a href="https://help.aliyun.com/knowledge_detail/6571620.html?spm=5176.7618386.5.1.jlj0lN" target="_blank" rel="external">这里</a>。结果 iftop 硬是装不上，<code>No package iftop available.</code> = =!。<br>尝试下载 rpm 包，发现各种依赖。只能不停 google, 发现有个关键字 <strong>epel</strong>，突然想到以前装 tensorflow 的时候好像有这么个的东西。先跑个 <code>yum install epel-release.noarc</code>, 再来 <code>yum install iftop</code>，成功了。<br>再看看<a href="https://fedoraproject.org/wiki/EPEL" target="_blank" rel="external">资料</a>，丫的是个扩展源。。。明早起来继续监控流量。</p>
]]></content>
    <summary type="html">
    <![CDATA[<p>最近搞了个萌宝投票活动，网站流量较大，也不知道该加多少带宽。<br>提了个工单，说是看<a href="https://help.aliyun.com/knowledge_detail/6571620.html?spm=5176.7618386.5.1.jlj0lN" ta]]>
    </summary>
    
      <category term="yum iftop" scheme="http://zhangke.pub/tags/yum-iftop/"/>
    
  </entry>
  
  <entry>
    <title><![CDATA[Selenium-12306购票]]></title>
    <link href="http://zhangke.pub/2015/12/09/selenium-12306%E8%B4%AD%E7%A5%A8/"/>
    <id>http://zhangke.pub/2015/12/09/selenium-12306购票/</id>
    <published>2015-12-09T08:22:28.000Z</published>
    <updated>2015-12-09T11:47:52.000Z</updated>
    <content type="html"><![CDATA[<p>最近看到一篇 selenium 购票的<a href="http://youerning.blog.51cto.com/10513771/1719159" target="_blank" rel="external">文章</a>，自己也在抢回家的票，于是造了一个<a href="https://github.com/5f3579d1/12306" target="_blank" rel="external">轮子</a>。以前用 java 实现了 weibo 数据的获取，这次尝试下 python 编程。</p>
<p>期间遇到一个问题:</p>
<blockquote>
<p>env: python\r: No such file or directory</p>
</blockquote>
<p>是换行符无法识别，估计是在用 sublime 编辑的时候引入，用 <code>dos2unix filename</code> 就能解决。</p>
]]></content>
    <summary type="html">
    <![CDATA[<p>最近看到一篇 selenium 购票的<a href="http://youerning.blog.51cto.com/10513771/1719159" target="_blank" rel="external">文章</a>，自己也在抢回家的票，于是造了一个<a hr]]>
    </summary>
    
      <category term="selenium python" scheme="http://zhangke.pub/tags/selenium-python/"/>
    
  </entry>
  
  <entry>
    <title><![CDATA[Hello World]]></title>
    <link href="http://zhangke.pub/2015/12/09/hello-world/"/>
    <id>http://zhangke.pub/2015/12/09/hello-world/</id>
    <published>2015-12-09T08:13:15.000Z</published>
    <updated>2015-12-09T08:13:15.000Z</updated>
    <content type="html"><![CDATA[<p>Welcome to <a href="http://hexo.io/" target="_blank" rel="external">Hexo</a>! This is your very first post. Check <a href="http://hexo.io/docs/" target="_blank" rel="external">documentation</a> for more info. If you get any problems when using Hexo, you can find the answer in <a href="http://hexo.io/docs/troubleshooting.html" target="_blank" rel="external">troubleshooting</a> or you can ask me on <a href="https://github.com/hexojs/hexo/issues" target="_blank" rel="external">GitHub</a>.</p>
<h2 id="Quick_Start"><a href="#Quick_Start" class="headerlink" title="Quick Start"></a>Quick Start</h2><h3 id="Create_a_new_post"><a href="#Create_a_new_post" class="headerlink" title="Create a new post"></a>Create a new post</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ hexo new <span class="string">"My New Post"</span></span><br></pre></td></tr></table></figure>
<p>More info: <a href="http://hexo.io/docs/writing.html" target="_blank" rel="external">Writing</a></p>
<h3 id="Run_server"><a href="#Run_server" class="headerlink" title="Run server"></a>Run server</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ hexo server</span><br></pre></td></tr></table></figure>
<p>More info: <a href="http://hexo.io/docs/server.html" target="_blank" rel="external">Server</a></p>
<h3 id="Generate_static_files"><a href="#Generate_static_files" class="headerlink" title="Generate static files"></a>Generate static files</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ hexo generate</span><br></pre></td></tr></table></figure>
<p>More info: <a href="http://hexo.io/docs/generating.html" target="_blank" rel="external">Generating</a></p>
<h3 id="Deploy_to_remote_sites"><a href="#Deploy_to_remote_sites" class="headerlink" title="Deploy to remote sites"></a>Deploy to remote sites</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ hexo deploy</span><br></pre></td></tr></table></figure>
<p>More info: <a href="http://hexo.io/docs/deployment.html" target="_blank" rel="external">Deployment</a></p>
]]></content>
    <summary type="html">
    <![CDATA[<p>Welcome to <a href="http://hexo.io/" target="_blank" rel="external">Hexo</a>! This is your very first post. Check <a href="http://hexo.io]]>
    </summary>
    
  </entry>
  
</feed>
